<app-header [title]="'Ver Cupón'"></app-header>

<ion-content>

  <ion-card *ngIf="coupon">

    <div class="p-2">
      <qrcode [qrdata]="couponCustomerCode"
              [size]="300"
              [level]="'M'"
      ></qrcode>
    </div>

    <ion-card-header>
      <ion-card-title class="ion-text-center">{{coupon.code}} - {{this.authService.currentCustomer.id}}</ion-card-title>
      <ion-card-subtitle class="ion-text-center"
      >{{'Vigente hasta ' + coupon.endsAt.format("DD/MM/YYYY HH:mm")}}</ion-card-subtitle
      >
    </ion-card-header>

    <ion-card-content>{{coupon.title}}. {{coupon.description}}. </ion-card-content>

    <ion-button class="ion-margin"
                expand="block"
                [color]="themeService.currentTheme.backgroundColor === 'light' ? 'dark' : themeService.currentTheme.backgroundColor"
                (click)="goBack()">
      <ion-label *ngIf="!redeemed">{{buttonLabel}}</ion-label>
      <ion-label color="success" *ngIf="redeemed">¡Ya canjeaste este cupón!</ion-label>
    </ion-button>

  </ion-card>
</ion-content>
